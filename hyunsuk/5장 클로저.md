# 5장 클로저

## 5.1 클로저의 의미 및 원리 이해

### 🔍 클로저의 정의

- 어떤 함수 A에서 선언한 변수 a를 참조하는 내부함수 B를 외부로 전달할 경우 A의 실행 컨텍스트가 종료된 이후에도 변수 a가 사라지지 않는 현상

- 함수를 선언할 때 만들어지는 유효범위가 사라진 후에도 호출할 수 있는 함수

- 이미 생명 주기가 끝난 외부 함수의 변수를 참조하는 함수

- 자신이 생성될 때의 스코프에서 알 수 있었던 변수들 중 언젠가 자신이 실행될 때 사용할 변수들만을 기억하여 유지시키는 함수

```js
let outer = function () {
  let a = 1;
  let inner = function () {
    return ++a;
  };
  return inner;
};
let outer2 = outer();
console.log(outer2()); // 2
console.log(outer2()); // 3
```

### 🔍 클로저의 주의사항

- 외부로 전달이 곧 return만을 의미하는 것은 아니다.

- 외부객체인 `setInterval, setTimeout`에 전달할 콜백 함수 내부에서 지역변수를 참조한다.

- 외부객체인 `addEventListener`에 등록할 handler 함수 내부에서 지역변수를 참조한다.

## 5.2 클로저와 메모리 관리

- 클로저는 어떤 필요에 의해 의도적으로 함수의 지역변수를 메모리를 소모하도록 함으로써 발생한다.

- 그 필요성이 사라진 시점에는 더는 메모리를 소모하지 않게 해주면 된다.

- 참조 카운트를 0으로 만들면 언젠가 GC가 수거해갈 것이고, 이때 소모됐던 메모리가 회수된다.

- 참조 카운트를 0으로 만드는 방법은 식별자에 참조형이 아닌 기본형 데이터(보통 null이나 undefined)를 할당하면 된다.

```js
let outer = (function () {
  let a = 1;
  let inner = function () {
    return ++a;
  };
  return inner;
})();
console.log(outer());
console.log(outer());
outer = null; // outer 식별자의 inner 함수 참조를 끊음
```

## 5.3 클로저 활용 사례

### 5.3.1 콜백 함수 내부에서 외부 데이터를 사용하고자 할 때

### 5.3.2 접근 권한 제어(정보 은닉)

### 5.3.3 부분 적용 함수

### 5.3.4 커링 함수

## 5.4 정리
