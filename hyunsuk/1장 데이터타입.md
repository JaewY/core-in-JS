# 1장 데이터 타입

## 1.1 데이터 타입의 종류

1. 기본형(원시형)

- 숫자, 문자열, 불리언, null,undefined, Symbol

2. 참조형

- 객체, 배열, 함수, 날짜, 정규표현식 등과 ES6에서 추가된 Map, WeakMap, Set, WeakSet

<img width="450" alt="스크린샷 2022-09-14 오전 9 02 55" src="https://user-images.githubusercontent.com/95524491/190030175-192718d9-c53b-4a9b-9580-087dac762c71.png">

## 1.2 데이터 타입에 관한 배경지식

### 1.2.1 메모리와 데이터

- 메모리 용량이 과거보다 월등히 커진 상황에서 등장한 자바스크립트는 상대적으로 메모리 관리에 대한 압박에서 자유로워졌다.

- 모든 데이터는 바이트 단위의 식별자, 더 정확하게는 메모리 주솟값을 통해 서로 구분하고 연결할 수 있다.

### 1.2.2 식별자와 변수

- 변수 : 변할 수 있는 수

  - 값이 반드시 숫자여야 하는 것은 아니다.
  - 변할 수 있는 무언가이다.
  - 무언가는 데이터를 의미한다.
  - 데이터 : 숫자도 데이터이고, 문자열, 객체, 배열 모두 데이터이다.

- 식별자 : 어떤 데이터를 식별하는 데 사용하는 이름, 즉 변수명

## 1.3 변수 선언과 데이터 할당

### 1.3.1 변수 선언

```Js
//변수 a 선언
let a;

```

- 변할 수 있는 데이터를 만든다. 이 데이터의 식별자는 a로 한다

- 변수란 변경 가능한 데이터가 담길 수 있는 공간 또는 그릇

<img width="475" alt="스크린샷 2022-09-14 오전 9 13 55" src="https://user-images.githubusercontent.com/95524491/190031206-5e6eda88-e4dc-4702-b4fa-e10eeb1f53e7.png">

### 1.3.2 데이터 할당

```Js
// 변수 a 선언
let a;

// 변수 a에 데이터 할당
a = "abc";

// 변수 선언과 할당을 한번에
let a = "abc";
```

- 데이터 변환을 자유롭게 할 수 있게 함과 동시에 메모리를 더욱 효율적으로 관리하기 위하여 데이터 영역에 따로 값을 저장한다.

<img width="484" alt="스크린샷 2022-09-14 오전 9 16 20" src="https://user-images.githubusercontent.com/95524491/190031406-d91e2570-384a-4b11-8b51-e30a20286652.png">

## 1.4 기본형 데이터와 참조형 데이터

### 1.4.1 불변값

- 기본형 데이터는 모두 불변값이다.

- 변수와 상수를 구분하는 성질은 변경 가능성

- 바꿀 수 있으면 변수, 바꿀 수 없으면 상수

- 변수와 상수를 구분 짓는 변경 가능성의 대상은 변수 영역 메모리

- 불변성 여부를 구분할 때의 변경 가능성의 대상은 데이터 영역 메모리입니다.

- 변경은 새로 만드는 동작을 통해서만 이뤄집니다.<br> 이것이 바로 불변값의 성질입니다.<br> 한 번 만들어진 값은 가비지 컬렉팅을 당하지 않는 한 영원히 변하지 않습니다.

### 1.4.2 가변값

```Js
let obj1 = {
	    a: 1,
	    b: 'bbb'
	  };
```

- 기본형 데이터와의 차이는 객체의 변수(프로퍼티) 영역이 별도로 존재한다는 점

<img width="466" alt="스크린샷 2022-09-14 오전 9 25 30" src="https://user-images.githubusercontent.com/95524491/190032161-cad3f427-6e79-47d6-ad58-99d5d2f42f88.png">

### 중첩 객체

```Js
let obj = {
   x: 3,
   arr : [3,4,5]
};
```

<img width="461" alt="스크린샷 2022-09-16 오전 11 48 30" src="https://user-images.githubusercontent.com/95524491/190546000-a332e475-c733-4888-86a5-d3e5b24c441c.png">

### obj.arr 재할당

```Js
let obj = {
   x: 3,
   arr : [3,4,5]
};

obj.arr = 'str';
```

<img width="467" alt="스크린샷 2022-09-16 오전 11 49 28" src="https://user-images.githubusercontent.com/95524491/190546117-eeff0832-3811-447a-a6d8-a3e4ed716a42.png">

- 어떤 데이터에 대해 자신의 주소를 참조하는 변수의 개수를 참조 카운트라고 합니다.

- 참조 카운트가 0인 메모리 주소는 가비지 컬렉터의 수거 대상이 됩니다.

- 수거된 메모리는 다시 새로운 값을 할당할 수 있는 빈 공간이 됩니다.

### 1.4.3 변수 복사 비교

- 사실은 어떤 데이터 타입이든 변수에 할당하기 위해서는 주솟값을 복사해야 하기 때문에, 엄밀히 따지면 자바스크립트의 모든 데이터 타입은 참조형 데이터일 수밖에 없다.

- 다만 기본형은 주솟값을 복사하는 과정이 한 번만 이뤄지고, 참조형은 한 단계를 더 거치게 된다는 차이가 있다.

- 참조형 데이터가 가변값이라고 설명할 때의 가변은 참조형 데이터 자체를 변경할 경우가 아니라 그 내부의 프로퍼티를 변경할 때만 성립한다.

## 1.5 불변 객체

### 1.5.1 불변 객체를 만드는 간단한 방법

- 값으로 전달받은 객체에 변경을 가하더라도 원본 객체는 변하지 않아야 하는 경우가 종종 발생할때 불변 객체가 필요하다.

### for..in을 이용한 얕은 복사

```Js
const copyFn = (target) => {
  let copyObj = {}
  for (const key in target){
    copyObj[key] = target[key]
  }
  return copyObj
};
```

### 1.5.2 얕은 복사와 깊은 복사

- 얕은 복사는 바로 아래 단계의 값만 복사하는 방법이고, 깊은 복사는 내부의 모든 값들을 하나하나 찾아서 전부 복사하는 방법

- 어떤 객체를 복사할 때 객체 내부의 모든 값을 복사해서 완전히 새로운 데이터를 만들고자 할 때, 객체의 프로퍼티 중에서 그 값이 기본형 데이터일 경우에는 그대로 복사하면 되지만 참조형 데이터는 다시 그 내부의 프로퍼티들을 복사해야 합니다

### for..in을 이용한 깊은 복사

```Js
const deepCopy = (target) => {
  let result = {}
  if (typeof target === "object" && target !== null){
    for(const key in target){
    	result[key] = deepCopy(target[key])
    }
  }else{
    result = target;
  }
  return result
}
```

### 객체를 JSON 문법으로 표현된 문자열로 전환했다가 다시 JSON 객체로 바꾸는 깊은 복사 방법

- 서드(함수)나 숨겨진 프로퍼티인 \_\_proto\_\_나 getter/setter 등과 같이 JSON으로 변경할 수 없는 프로퍼티들은 모두 무시합니다.
- httpRequest로 받은 데이터를 저장한 객체를 복사할 때 등 순수한 정보만 다룰 때 활용하기 좋은 방법

```Js
const deepCopyViaJSON = (target) => {
  return JSON.parse(JSON.stringify(target));
}
```

## 1.6 undefined와 null

- 자바스크립트 엔진은 사용자가 응당 어떤 값을 지정할 것이라고 예상되는 상황임에도 실제로는 그렇게 하지 않았을 때(3가지 경우) undefined를 반환한다.

1. 값을 대입하지 않은 변수에 접근
2. 객체 내부의 존재하지 않는 프로퍼티에 접근
3. return 문이 없거나 호출되지 않는 함수의 실행 결과

```Js
let a;
console.log(a);	// (1) undefined. 값을 대입하지 않은 변수에 접근

let obj = { a: 1 };
console.log(obj.a);	// 1
console.log(obj.b);	// (2) undefined. 존재하지 않는 프로퍼티에 접근
console.log(b);	// c.f) ReferenceError: b is not defined

let func = function() { };
let c = func();	// (3) 반환(return) 값이 없으면 undefined를 반환한 것으로 간주.
console.log(c);	// undefined
```

- 값이 지정되지 않은 인덱스는 아직은 존재하지 않는 프로퍼티에 지나지 않는다.

- 직접 undefined를 할당하지 말기

- 비어있음을 명시적으로 나타내고 싶을 때는 undefined가 아닌 null을 써야한다.

- null의 주의 사항은 typeof null이 object라는 점이다. 이는 자바스크립트 자체 버그이다.

## 1.7 정리

- 기본적으로 기본형은 불변값이고 참조형은 가변값입니다

- 변수는 변경 가능한 데이터가 담길 수 있는 공간이고, 식별자는 그 변수의 이름을 말합니다.

- 참조형 데이터를 불변값으로 사용하기 위해서는 깊은 복사를 해야한다.

- 없음을 나타내는 값은 두 가지가 있는데, undefined는 어떤 변수에 값이 존재하지 않을 경우를 의미하고 null은 사용자가 명시적으로 없음을 표현하기 위해 대입한 값이다.
