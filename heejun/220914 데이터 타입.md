# 1장 데이터 타입

</br>

## 데이터 타입의 종류

</br>

### 기본형

- Number (숫자)
- String (문자)
- Boolean (불리언)
- null
- undefined
- (ES6) Symbol

### 참조형

- Object (객체)
- Array (배열)
- function (함수)
- Date (날짜)
- RegExp (정규 표현식)
- Map, WeakMap, Set, WeakSet...

배우기 쉽도록 기본형은 데이터를 그대로 할당, 참조형은 그 데이터가 들어가 있는 주소를 할당한다고 배웠으나,실질적으로는 둘 다 주소를 할당하지만</br></br>기본형은 값이 담긴 주솟값을 바로 할당하고, </br>참조형은 값이 담긴 주솟값으로 이루어진 묶음을 가리키는 주솟값을 할당한다고 설명한다.

---

## 데이터 타입에 관한 배경지식

### 1) 메모리와 데이터

각 비트는 고유한 식별자를 통해 위치를 확인한다. <br/>하지만 메모리는 매우 많은 비트로 구성되어 있기 때문에 비트 단위로 위치를 확인하는 것은 비효율적이다.
Byte: 비트를 묶어 하나의 단위로 표현해보자

#### 장점

검색 시간이 줄어든다.
10000개의 비트를 1개씩 검색하면 만 번을 검색해야 하지만, 8개씩 묶으면 검색 횟수가 8배 낮아진다.
표현할 수 있는 데이터의 개수가 늘어난다.
1비트 표현 가지 수는 2개 뿐이지만, 2비트씩 묶으면 2배씩 증가한다.

#### 단점

낭비되는 비트가 생긴다. 그렇기에 C, C++, JAVA등의 정적 타입 언어는 메모리 낭비를 최소화하기 위해 메모리 영역을 특정 바이트로 나누어 정해놓는다.</br>
ex) 2byte= 16bit= 2^16 = 65536, 65,536개의 값을 표현할 수 있다.32,768~ +32,767 숫자를 허용한다. (0포함)</br>
지금은 과거보다 메모리가 월등히 커저, 자바스크립트는 상대적으로 메모리 관리에 대한 압박이 자유로우며, 숫자의 경우 8바이트를 확보한다.</br>
모든 데이터는 바이트 단위의 식별자, 메모리 주솟값을 통해 서로 구분하고 연결할 수 있다.

### 2) 변수와 식별자

변수(Variable): 변경 가능한 데이터가 담길 수 있는 공간, 그릇
식별자(Identifier): 어떤 데이터를 식별하는 데 사용하는 이름, 변수명 이라고도 부른다.

### 3) 변수 선언과 데이터 할당

변수 영역에 값을 직접 대입하지 않고 굳이 데이터 영역에 값을 저장하는 이유는 뭘까?</br></br>
데이터 영역에 값을 저장하면 메모리를 효율적으로 관리할 수 있다.

#### 3-1) 데이터 변환을 자유롭게 할 수 있다.

데이터를 추가해야하는 상황이 발생하면, '확보한 공간을 변환된 데이터 크기에 맞게 늘리는 작업이 발생한다.</br>
중간에 있는 데이터를 늘리기 위해 해당 공간보다 뒤에 저장된 데이터들을 전부 뒤로 옮기고, 이동시킨 주소를 각 식별자에 다시 연결하는 작업이 발생하여, 컴퓨터의 연산이 더욱 많아지게 된다.</br>
따라서 최적은 변수와 데이터를 별도의 공간에 나누어 저장하는 것이다.

#### 3-2) 중복된 데이터에 대한 처리 효율이 높아진다.

예를 들어, 500개의 변수를 생성해서 모든 변수에 숫자 5를 할당할 때, 8바이트 _ 500개 = 4000바이트가 소모된다.</br>
그대신 5를 별도의 공간에 저장하고 해당 주솟값을 이용한다면, 주소공간의 크기 2바이트 _ 500개 + 8바이트(숫자 5) 로 총 1008바이트만 이용하면 메모리를 효율적으로 사용할 수 있게 된다.

---

## 기본형 데이터와 참조형 데이터

### 1) 불변값

변수와 상수를 구분 짓는 것은?
'변수 영역' 메모리를 변경할 수 있는가
<img src="./image/스크린샷 2022-09-14 오후 6.30.08.png" width="400px">
기본형 데이터 타입의 변수는 값을 재할당할 때 메모리에 저장된 데이터가 실제로 바뀌는 것처럼 보인다.<br/>
하지만 메모리에 저장된 데이터는 건드리지 않고, 새로운 데이터를 만들어 주솟값만 재할당하는 프로세스를 따르기 때문에 기본형 데이터 타입의 값은 불변값이라고 부른다.<br/><br/>
기본형 데이터는 모두 불변값이다.
<img src="./image/스크린샷 2022-09-14 오후 6.32.34.png" width="400px">
'abc'가 'def'로 바뀌는 것이 아니라, 새로운 문자열 'def'를 만들어 그 주소를 변수 a에 저장된다. <br/>따라서 기존에 '데이터 영역' 메모리에 저장된 'abc'를 변경하는 것이 아니기 때문에 불변값이라고 한다.
변경은 새로 만드는 동작을 통해서만 이뤄진다. 한 번 만들어진 값은 가비지 컬렉팅을 당하지 않는 이상 영원히 변하지 않는다.

- 그렇다면 **'불변성'여부**를 구분 짓는 것은?

* **'데이터 영역' 메모리**를 변경할 수 있는지를 통해 구분지을 수 있다.

### 2) 가변값

기본형 데이터 타입과 참조형 데이터 타입의 차이는 객체의 변수 영역, 즉 프로퍼티가 별도로 존재한다는 점이다.
참조형 데이터 타입도 값은 '데이터 영역'에 저장하며 기존의 메모리 공간을 그대로 활용하고 있지만, 객체가 별도로 할애한 영역(프로퍼티)은 변수 영역이기 때문에 원하는 만큼 값을 바꾸고 수정할 수 있다. 바로 이부분 때문에 참조형 데이터의 값은 가변값이라고 한다.
<br/>
<img src="./image/스크린샷 2022-09-14 오후 6.33.55.png" width="400px">
<img src="./image/스크린샷 2022-09-14 오후 6.34.52.png" width="400px">

obj1의 데이터는 그대로(@5002)이지만, 그 안의 데이터, 프로퍼티 a는(@5003 → @5004) 새롭게 변경되었다. 바로 이 점이 데이터 할당에 의해 가변적으로 변경된 것처럼 보이는 점이다.<br/>

#### 데이터의 가변성/불변성을 구분하는 기준이 데이터 영역이 되는 이유

- 객체의 값은 (객체 변수 영역을 가르키는 주솟값들의 묶음)의 주솟값이다 (@5002).<br/>
- 객체의 변수 영역의 값이 바뀔때마다, 데이터 영역안에 있는 이 묶음의 주솟값은 바뀌진 않지만, 갖고있는 값은 바뀐다.<br/>
- 따라서 객체의 변수 영역의 값이 달라지면, 묶음의 주솟값을 갖고 있는 객체도 값이 바뀌는 현상이 나타나게 된다.<br/><br/>

#### 가비지 컬렉터

- 참조 카운트가 0인 메모리 주소는 가비지 컬렉터의 수거 대상이 된다.<br/>
- 가비지 컬렉터는 런타임 환경에 따라 특정 시점이나 메모리 사용량이 포화 상태에 임박할 때 마다 자동으로 수거대상들을 수거한다.<br/>
- 수거된 메모리는 다시 새로운 값을 할당할 수 있는 빈 공간이 된다.<br/>

#### 변수 복사 비교

##### 기본형과 참조형의 복사 이후 값을 변경했을 때의 차이점

- 기본형 - 변수 영역의 주솟값이 달라진다.
- 참조형 - 변수 영역의 주소값은 변하지 않고, 객체의 변수 영역의 주솟값이 달라진다. 객체의 주솟값은 그대로 쓰기 때문에 새로운 객체가 할당되지 않으면 원본과 사본의 프로퍼티는 동일하게 변한다.
- 반면, 새로운 객체를 할당하면 변수 영역의 값이 달라진다.
- 즉, 참조형 데이터가 가변값이라고 하는 경우는 참조형 데이터 자체를 변경할 경우가 아니라, 그 내부의 프로퍼티를 변경할 때를 말하는 것이다.

---

## 불변객체

값으로 전달받은 객체에 변경을 가하더라도 원본 객체는 변하지 않아야 하는 경우 불변 객체가 필요하다.

- 얕은 복사 : 바로 아래 단계의 값만 복사하는 방법
- 깊은 복사 : 내부의 모든 값들을 하나하나 찾아서 전부 복사하는 방법

---

## undefined와 null

- undefined : 어떤 변수에 값이 존재하지 않을 경우 자바스크립트 엔진이 자동적으로 반환하는 값
- null : 사용자가 명시적으로 없음을 표현하기 위해 대입한 값
